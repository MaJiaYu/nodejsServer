webpackJsonp([0],{"+GAE":function(t,n,o){"use strict";var e=function(){var t=this,n=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{attrs:{id:"LoadOpenId"}},[o("h1",[t._v("正在加载，请稍候")])])}],s={render:e,staticRenderFns:a};n.a=s},0:function(t,n){},"02u0":function(t,n,o){"use strict";var e=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{staticClass:"divMagrin",attrs:{id:"infoDisplay"}},[o("div",{staticClass:"media divMargin",staticStyle:{margin:"30px 30px"}},[o("div",{staticClass:"media-left media-middle"},[o("img",{staticClass:"media-object",attrs:{src:t.imageUrl,alt:"头像信息",height:"100px",width:"80px"}})]),t._v(" "),o("div",{staticClass:"media-body",staticStyle:{"font-size":"medium"}},[o("span",{staticStyle:{color:"gray","font-weight":"normal"}},[t._v("姓名:")]),t._v(" "),o("span",{domProps:{textContent:t._s(t.opName)}}),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("span",{staticStyle:{color:"gray","font-weight":"normal"}},[t._v("工号:")]),t._v(" "),o("span",{domProps:{textContent:t._s(t.opno)}})])])])},a=[],s={render:e,staticRenderFns:a};n.a=s},"1d5T":function(t,n){},"3NxJ":function(t,n){},"7Otq":function(t,n,o){t.exports=o.p+"static/img/logo.6740b53.png"},"86FU":function(t,n,o){"use strict";function e(t){o("g23H")}var a=o("Kc+q"),s=o("lvgY"),i=o("VU/8"),r=e,c=i(a.a,s.a,r,null,null);n.a=c.exports},"9r5J":function(t,n,o){"use strict";var e=o("mvHQ"),a=o.n(e),s=o("JzCU");n.a={name:"QRCODE",data:function(){return{sendTemp:{htlcode:"",posno:"",opno:"",star:"",comment:" ",money:"",unique:"",action:"",typeno:"",openId:"",telno:"",total_fee:""},GetQrCode:{htlcode:"",posno:"",opno:"",action:"GetQrCode",openid:""},WxPayData:{appId:"",package:"",nonceStr:"",paySign:"",signType:"",timeStamp:""},QrUrl:"",money:null,moneyList:[1,5,10,20]}},created:function(){var t=this;this.GetQrCode.opno=s.a.opno,this.GetQrCode.htlcode=s.a.htlcode,this.GetQrCode.posno=s.a.posno,this.GetQrCode.openid=s.a.OpenId,this.$http.post(s.a.PostUrl,a()(this.GetQrCode)).then(function(n){t.QrUrl=n.body})},methods:{giveMoney:function(){$("#giveMoney").modal("show")},weChatPay:function(t){var n=this;if($("#giveMoney").modal("hide"),this.sendTemp.action="WxPayApi",this.sendTemp.htlcode=s.a.OpnoInfo.htlcode,this.money=t,this.sendTemp.openId=s.a.OpenId,this.sendTemp.total_fee=t,this.$http.post(s.a.PostUrl,a()(this.sendTemp)).then(function(t){n.WxPayData.appId=t.body.appId,n.WxPayData.nonceStr=t.body.nonceStr,n.WxPayData.package=t.body.package,n.WxPayData.signType=t.body.signType,n.WxPayData.timeStamp=t.body.timeStamp,n.WxPayData.paySign=t.body.paySign,n.sendTemp.htlcode=s.a.OpnoInfo.htlcode,n.sendTemp.posno=s.a.OpnoInfo.posno,n.sendTemp.opno=s.a.OpnoInfo.opno,n.sendTemp.unique=s.a.userRandom,n.sendTemp.telno=s.a.telno,n.sendTemp.typeno="money",n.sendTemp.action="payMoney",n.onBridgeReady(n.sendTemp)}),null==this.money||""==this.money||" "==this.money)return void alert("您输入的金额有误，请重新输入")},PostPayData:function(){alert("InPostPayData"),this.sendTemp.htlcode=s.a.OpnoInfo.htlcode,this.sendTemp.posno=s.a.OpnoInfo.posno,this.sendTemp.opno=s.a.OpnoInfo.opno,this.sendTemp.unique=s.a.userRandom,this.sendTemp.typeno="Pay",this.sendTemp.action="payMoney",this.$http.post(s.a.PostUrl,this.sendTemp).then(function(t){alert(t.body),"Success"==t.body&&history.go(0)})},onBridgeReady:function(t){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:this.WxPayData.appId,timeStamp:this.WxPayData.timeStamp,nonceStr:this.WxPayData.nonceStr,package:this.WxPayData.package,signType:"MD5",paySign:this.WxPayData.paySign},function(n){"get_brand_wcpay_request:ok"==n.err_msg&&$.ajax({type:"POST",url:s.a.PostUrl,data:a()(t),contentType:"application/json"})})}}}},AeMJ:function(t,n){},Bqfm:function(t,n,o){"use strict";var e=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{attrs:{id:"QRCODE"}},[o("img",{staticStyle:{width:"100%"},attrs:{src:t.QrUrl,alt:"二维码图片"}}),t._v(" "),o("button",{staticClass:"btn btn-warning btn-block navbar-fixed-bottom",staticStyle:{"font-size":"20px","background-color":"rgb(44,137,58)"},on:{click:t.giveMoney}},[t._v("\r\n            打赏\r\n    ")]),t._v(" "),o("div",{staticClass:"modal fade bs-example-modal-sm",attrs:{role:"dialog",id:"giveMoney"}},[o("div",{staticClass:"modal-dialog modal-sm",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[t._v("\r\n                        请输入打赏金额\r\n                    ")]),t._v(" "),o("div",{staticClass:"modal-body",staticStyle:{width:"100%"}},[t._l(t.moneyList,function(n){return o("button",{staticClass:"btn btn-default  moneyBtn",staticStyle:{width:"40%"},on:{click:function(o){t.weChatPay(n)}}},[t._v(t._s(n)+"元")])}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.money,expression:"money"}],staticClass:"form-control",attrs:{type:"number",placeholder:"请输入金额"},domProps:{value:t.money},on:{input:function(n){n.target.composing||(t.money=n.target.value)}}})],2),t._v(" "),o("div",{staticClass:"modal-footer",staticStyle:{height:"60px"}},[o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){t.weChatPay(t.money)}}},[t._v("确定")]),t._v(" "),o("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")])])])])])])},a=[],s={render:e,staticRenderFns:a};n.a=s},C6j0:function(t,n,o){"use strict";var e={htlcode:"",name:"",opno:"",posno:"",image:""},a={appId:"",package:"",signType:"",timeStamp:"",paySign:"",nonceStr:""};n.a={userRandom:"",OpnoInfo:e,PostUrl:"http://120.78.165.166:8082/DataHandler.ashx",OpenId:"",PayInfo:a,opno:"",htlcode:"",posno:"",telno:"",PostPayData:function(t){alert(t.action)}}},JzCU:function(t,n,o){"use strict";var e=o("C6j0"),a=o("VU/8"),s=a(e.a,null,null,null,null);n.a=s.exports},"Kc+q":function(t,n,o){"use strict";var e=o("mvHQ"),a=o.n(e),s=o("JzCU");n.a={name:"comand",data:function(){return{starsNum:0,sendTemp:{htlcode:"",posno:"",opno:"",star:"",comment:" ",money:"",unique:"",action:"",typeno:"",openId:"",telno:"",total_fee:""},comandText:"",comandMsg:"评价成功，感谢您的评价",money:null,moneyList:[1,5,10,20],stars:[{num:1,active:!1},{num:2,active:!1},{num:3,active:!1},{num:4,active:!1},{num:5,active:!1}],WxPayData:{appId:"",package:"",nonceStr:"",paySign:"",signType:"",timeStamp:""}}},methods:{submit:function(){var t=this;if(this.sendTemp.htlcode=s.a.OpnoInfo.htlcode,this.sendTemp.posno=s.a.OpnoInfo.posno,this.sendTemp.opno=s.a.OpnoInfo.opno,this.sendTemp.star=this.starsNum,this.sendTemp.comment=this.comandText,this.sendTemp.unique=s.a.userRandom,this.sendTemp.telno=s.a.telno,this.sendTemp.typeno="comment",this.sendTemp.action="Check",null==this.starsNum&&null==this.comandText||""==this.starsNum&&""==this.comandText)return void alert("你没有进行评价");this.$http.post(s.a.PostUrl,a()(this.sendTemp)).then(function(n){"OK"==n.statusText?(t.sendTemp.action="Mark",t.$http.post(s.a.PostUrl,a()(t.sendTemp)).then(function(n){$("#myModal").modal("show"),"Success"==n.body?t.comandMsg="评价成功，感谢您的评价":t.comandMsg="评价失败，请联系服务员"})):($("#myModal").modal("show"),t.comandMsg="对不起您已评价，请勿重复评价")})},clickStar:function(t){this.starsNum=t,this.stars.active=!1;for(var n=0;n<this.stars.length;n++)this.stars[n].active=!1;for(var n=0;n<t;n++)this.stars[n].active=!0},giveMoney:function(){$("#giveMoney").modal("show")},weChatPay:function(t){var n=this;if($("#giveMoney").modal("hide"),this.sendTemp.action="WxPayApi",this.sendTemp.htlcode=s.a.OpnoInfo.htlcode,this.money=t,this.sendTemp.openId=s.a.OpenId,this.sendTemp.total_fee=t,this.$http.post(s.a.PostUrl,a()(this.sendTemp)).then(function(t){n.WxPayData.appId=t.body.appId,n.WxPayData.nonceStr=t.body.nonceStr,n.WxPayData.package=t.body.package,n.WxPayData.signType=t.body.signType,n.WxPayData.timeStamp=t.body.timeStamp,n.WxPayData.paySign=t.body.paySign,n.sendTemp.htlcode=s.a.OpnoInfo.htlcode,n.sendTemp.posno=s.a.OpnoInfo.posno,n.sendTemp.opno=s.a.OpnoInfo.opno,n.sendTemp.unique=s.a.userRandom,n.sendTemp.telno=s.a.telno,n.sendTemp.typeno="money",n.sendTemp.action="payMoney",n.onBridgeReady(n.sendTemp)}),null==this.money||""==this.money||" "==this.money)return void alert("您输入的金额有误，请重新输入")},PostPayData:function(){alert("InPostPayData"),this.sendTemp.htlcode=s.a.OpnoInfo.htlcode,this.sendTemp.posno=s.a.OpnoInfo.posno,this.sendTemp.opno=s.a.OpnoInfo.opno,this.sendTemp.unique=s.a.userRandom,this.sendTemp.typeno="Pay",this.sendTemp.action="payMoney",this.$http.post(s.a.PostUrl,this.sendTemp).then(function(t){alert(t.body),"Success"==t.body&&history.go(0)})},onBridgeReady:function(t){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:this.WxPayData.appId,timeStamp:this.WxPayData.timeStamp,nonceStr:this.WxPayData.nonceStr,package:this.WxPayData.package,signType:"MD5",paySign:this.WxPayData.paySign},function(n){"get_brand_wcpay_request:ok"==n.err_msg&&$.ajax({type:"POST",url:s.a.PostUrl,data:a()(t),contentType:"application/json"})})}}}},M93x:function(t,n,o){"use strict";function e(t){o("QD4T")}var a=o("xJD8"),s=o("X8xS"),i=o("VU/8"),r=e,c=i(a.a,s.a,r,null,null);n.a=c.exports},NHnr:function(t,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=o("7+uW"),a=o("M93x"),s=o("YaEn"),i=o("ORbq");e.a.use(i.a),e.a.config.productionTip=!1,new e.a({el:"#app",router:s.a,template:"<App/>",components:{App:a.a}})},PO9j:function(t,n,o){"use strict";function e(t){o("YaHJ")}var a=o("qQN6"),s=o("02u0"),i=o("VU/8"),r=e,c=i(a.a,s.a,r,null,null);n.a=c.exports},QD4T:function(t,n){},X8xS:function(t,n,o){"use strict";var e=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},a=[],s={render:e,staticRenderFns:a};n.a=s},YaEn:function(t,n,o){"use strict";var e=o("7+uW"),a=o("/ocq"),s=(o("PO9j"),o("nZ/3")),i=o("avGr"),r=o("ur00");e.a.use(a.a),n.a=new a.a({routes:[{path:"/AppCom",name:"AppCom",component:i.a},{path:"/LoadOpenId",name:"LoadOpenId",component:s.a},{path:"/QrCode",name:"QrCode",component:r.a}]})},YaHJ:function(t,n){},auqM:function(t,n,o){"use strict";var e=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{attrs:{id:"AppCom"}},[t._m(0),t._v(" "),o("infoDisplay",{staticStyle:{"margin-bottom":"20px"}}),t._v(" "),o("comand")],1)},a=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticStyle:{width:"100%","margin-bottom":"50px"}},[e("img",{staticStyle:{width:"90%"},attrs:{src:o("7Otq")}})])}],s={render:e,staticRenderFns:a};n.a=s},avGr:function(t,n,o){"use strict";function e(t){o("AeMJ")}var a=o("ubRk"),s=o("auqM"),i=o("VU/8"),r=e,c=i(a.a,s.a,r,null,null);n.a=c.exports},g23H:function(t,n){},l7Vh:function(t,n,o){"use strict";var e=o("JzCU");n.a={name:"LoadOpenId",data:function(){return{opno:"",posno:"",htlcode:"",OpenId:"",UrlString:"http://www.wedawechat.com/api/oauth_login.aspx?wid=69&rf=",postTemp:{action:"Urlencode",url:"http://m.betrue-cy.com:8082/#/AppCom?opno={opno}&htlcode={htlcode}&posno={posno}&openid={openid}"}}},created:function(){var t=this;this.UrlSearch(),this.postTemp.url=this.postTemp.url.replace("{opno}",this.opno),this.postTemp.url=this.postTemp.url.replace("{htlcode}",this.htlcode),this.postTemp.url=this.postTemp.url.replace("{posno}",this.posno),console.log("post"),this.$http.post(e.a.PostUrl,this.postTemp).then(function(n){console.log(n),t.UrlString+=n.body,console.log(t.UrlString),location.href=t.UrlString})},methods:{UrlSearch:function(){var t,n,o=location.href,a=o.indexOf("?");o=o.substr(a+1);for(var s=o.split("&"),i=0;i<s.length;i++)(a=s[i].indexOf("="))>0&&(t=s[i].substring(0,a),n=s[i].substr(a+1),this[t]=n);e.a.OpnoInfo.posno=this.posno=this.posno.replace("#/",""),e.a.OpnoInfo.opno=this.opno=this.opno.replace("#/",""),e.a.OpnoInfo.htlcode=this.htlcode=this.htlcode.replace("#/","")}}}},lvgY:function(t,n,o){"use strict";var e=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{staticClass:"divMagrin",attrs:{id:"comand"}},[o("label",[t._v("评星")]),t._v(" "),o("div",{staticClass:"rating rating2",staticStyle:{"font-size":"30px"}},t._l(t.stars,function(n){return o("span",{class:{yellowActive:n.active},staticStyle:{"margin-left":"5px"},on:{click:function(o){t.clickStar(n.num)}}},[t._v("★")])})),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comandText,expression:"comandText"}],staticClass:"form-control",attrs:{rows:"3",placeholder:"请输入评价内容"},domProps:{value:t.comandText},on:{input:function(n){n.target.composing||(t.comandText=n.target.value)}}}),t._v(" "),o("button",{staticClass:"btn btn-primary btn-block",staticStyle:{"margin-top":"10px","background-color":"rgb(44,137,58)"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),o("div",{staticStyle:{height:"50px"}}),t._v(" "),o("button",{staticClass:"btn btn-warning btn-block navbar-fixed-bottom",staticStyle:{"font-size":"20px","background-color":"rgb(44,137,58)"},on:{click:t.giveMoney}},[t._v("\n        打赏\n    ")]),t._v(" "),o("div",{staticClass:"modal fade bs-example-modal-sm",attrs:{role:"dialog",id:"myModal"}},[o("div",{staticClass:"modal-dialog modal-sm",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-body"},[t._v("\n                    "+t._s(t.comandMsg)+"\n                ")]),t._v(" "),o("div",{staticClass:"modal-footer",staticStyle:{height:"60px"}},[o("button",{staticClass:"btn btn-default ",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.clickSubmit}},[t._v("关闭")])])])])]),t._v(" "),o("div",{staticClass:"modal fade bs-example-modal-sm",attrs:{role:"dialog",id:"giveMoney"}},[o("div",{staticClass:"modal-dialog modal-sm",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[t._v("\n                    请输入打赏金额\n                ")]),t._v(" "),o("div",{staticClass:"modal-body",staticStyle:{width:"100%"}},[t._l(t.moneyList,function(n){return o("button",{staticClass:"btn btn-default  moneyBtn",staticStyle:{width:"40%"},on:{click:function(o){t.weChatPay(n)}}},[t._v(t._s(n)+"元")])}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.money,expression:"money"}],staticClass:"form-control",attrs:{type:"number",placeholder:"请输入金额"},domProps:{value:t.money},on:{input:function(n){n.target.composing||(t.money=n.target.value)}}})],2),t._v(" "),o("div",{staticClass:"modal-footer",staticStyle:{height:"60px"}},[o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){t.weChatPay(t.money)}}},[t._v("确定")]),t._v(" "),o("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")])])])])])])},a=[],s={render:e,staticRenderFns:a};n.a=s},"nZ/3":function(t,n,o){"use strict";function e(t){o("3NxJ")}var a=o("l7Vh"),s=o("+GAE"),i=o("VU/8"),r=e,c=i(a.a,s.a,r,null,null);n.a=c.exports},qQN6:function(t,n,o){"use strict";var e=o("mvHQ"),a=o.n(e),s=o("JzCU");n.a={name:"infoDisplay",data:function(){return{opno:"",opName:"",imageUrl:"",htlcode:"",OpenId:"",qrInfo:{opno:"",htlcode:"",posno:"",action:"GetOpnoInfo"},checkIsUser:{action:"CheckUser",openId:"",htlcode:""}}},created:function(){var t=this;this.UrlSearch(),this.$http.post(s.a.PostUrl,a()(this.checkIsUser)).then(function(t){"NoUser"==t.body?location.href="#/QrCode":s.a.telno=t.body}),this.$http.post(s.a.PostUrl,a()(this.qrInfo)).then(function(n){s.a.OpnoInfo=n.body,t.opno=s.a.OpnoInfo.opno,t.opName=s.a.OpnoInfo.name,t.imageUrl=s.a.OpnoInfo.image})},methods:{UrlSearch:function(){var t,n,o=location.href;o=decodeURI(o);var e=o.indexOf("?");o=o.substr(e+1);for(var a=o.split("&"),i=0;i<a.length;i++)(e=a[i].indexOf("="))>0&&(t=a[i].substring(0,e),n=a[i].substr(e+1),this[t]=n);this.qrInfo.posno=this.posno.replace("#/",""),this.qrInfo.opno=this.opno.replace("#/",""),this.qrInfo.htlcode=this.htlcode.replace("#/",""),s.a.OpenId=this.openid.replace("#/",""),s.a.opno=this.opno.replace("#/",""),s.a.htlcode=this.qrInfo.htlcode,s.a.posno=this.qrInfo.posno,this.checkIsUser.openId=this.openid.replace("#/",""),this.checkIsUser.htlcode=s.a.htlcode}}}},ubRk:function(t,n,o){"use strict";var e=o("PO9j"),a=o("86FU"),s=o("JzCU");n.a={name:"AppCom",components:{infoDisplay:e.a,comand:a.a},data:function(){return{qrInfo:{opno:"",htlcode:"",posno:"",action:"GetOpnoInfo"}}},created:function(){s.a.userRandom=Date.now()+Math.random()}}},ur00:function(t,n,o){"use strict";function e(t){o("1d5T")}var a=o("9r5J"),s=o("Bqfm"),i=o("VU/8"),r=e,c=i(a.a,s.a,r,null,null);n.a=c.exports},xJD8:function(t,n,o){"use strict";var e=o("PO9j"),a=o("86FU"),s=o("JzCU");n.a={name:"app",components:{infoDisplay:e.a,comand:a.a},data:function(){return{qrInfo:{opno:"0000",htlcode:"0771001",posno:"1",action:"GetOpnoInfo"}}},created:function(){s.a.userRandom=Date.now()+Math.random()}}}},["NHnr"]);
//# sourceMappingURL=app.70257bbf9eaafb4a7b94.js.map